"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{"default":r}}function findDurationTagInString(r){if(void 0!==r){var n=r.match(/^<[^>]*>/)||[];if(!n.length)return!1;if(n.length>1)throw Error("multiple durations in a single str.",r);var e=n[0];return e.substr(1,e.length-2)}}function parseDurationTag(r){var n={};return _underscore2["default"].each(r.split(":"),function(e){var t=e.match(/[^0-9]+/gi);if(!t)throw new Error("missing duration unit for "+e+" in "+r);if(t.length>1)throw Error("invalid duration unit for "+e+". missing : separator?");t=t[0];var u=unitCodes[t];if(!u)throw new Error("unrecognized duration unit in: "+e+" - "+r);n[u]=parseInt(e.replace(t,""))}),n}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),unitCodes={ms:"milliseconds",m:"minutes",s:"seconds",h:"hours",d:"days",w:"weeks",mo:"months",y:"years"};module.exports={isValidDurationValue:function(r){if("string"!=typeof r&&"number"!=typeof r)return!1;if("string"==typeof r&&r.match(/[^\d]/))return!1;var n=parseInt(r,10);return isNaN(n)?!1:!(0>n||n>60)},getDurationFromTag:function(r){var n=findDurationTagInString(r);return n?parseDurationTag(n):void 0},getTagFromDuration:function(r){var n=[];return _underscore2["default"].each(r,function(r,e){n.push(r+_underscore2["default"].invert(unitCodes)[e])}),"<"+n.join(":")+">"},durationToDisplayString:function(r){var n=[],e=["hours","minutes","seconds"];return _underscore2["default"].each(r,function(r,n){if(!_underscore2["default"].contains(e,n))throw new Error("invalid duration unit")}),r.hours&&n.push(r.hours+"h"),r.minutes&&n.push(r.minutes+"m"),r.seconds&&n.push(r.seconds+"s"),n.join(":")},estimateDurationsFromString:function(r){var n=r.split(" ");n=_underscore2["default"].map(n,function(r){return r.replace(/[\.\,\(\)]/g,"")});var e={seconds:["second","seconds"],minutes:["minute","minutes"],hours:["hour","hours"],days:["day","days"]},t=[];return _underscore2["default"].each(n,function(r,u){if(r.match(/[0-9]+/g)||"a"===r||"an"===r){var i={};_underscore2["default"].each(e,function(e,t){_underscore2["default"].indexOf(e,n[u+1])>-1?i[t]=parseInt(r,10)||1:_underscore2["default"].indexOf(e,n[u+2])>-1?i[t]=parseInt(r,10)||1:_underscore2["default"].indexOf(e,n[u+3])>-1&&(i[t]=parseInt(r,10)||1)}),Object.keys(i).length&&t.push(i)}}),t}};