"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{"default":r}}function findDurationTagInString(r){if(void 0!==r){var n=r.match(/^<[^>]*>/)||[];if(!n.length)return!1;if(n.length>1)throw Error("multiple durations in a single str.",r);var e=n[0];return e.substr(1,e.length-2)}}function parseDurationTag(r){var n={};return _underscore2["default"].each(r.split(":"),function(e){var t=e.match(/[^0-9]+/gi);if(!t)throw new Error("missing duration unit for "+e+" in "+r);if(t.length>1)throw Error("invalid duration unit for "+e+". missing : separator?");t=t[0];var u=unitCodes[t];if(!u)throw new Error("unrecognized duration unit in: "+e+" - "+r);n[u]=parseInt(e.replace(t,""))}),n}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),unitCodes={ms:"milliseconds",m:"minutes",s:"seconds",h:"hours",d:"days",w:"weeks",mo:"months",y:"years"};module.exports={tagToDuration:function(r){var n=findDurationTagInString(r);return n?parseDurationTag(n):void 0},durationToTag:function(r){var n=[];return _underscore2["default"].each(r,function(r,e){n.push(r+_underscore2["default"].invert(unitCodes)[e])}),"<"+n.join(":")+">"},isValidDurationValue:function(r){if("string"!=typeof r&&"number"!=typeof r)return!1;if("string"==typeof r&&r.match(/[^\d]/))return!1;var n=parseInt(r,10);return isNaN(n)?!1:!(0>n||n>60)},durationToDisplayString:function(r){var n=[],e=["hours","minutes","seconds"];return _underscore2["default"].each(r,function(r,n){if(!_underscore2["default"].contains(e,n))throw new Error("invalid duration unit")}),r.hours&&n.push(r.hours+"h"),r.minutes&&n.push(r.minutes+"m"),r.seconds&&n.push(r.seconds+"s"),n.join(":")},estimateDurationsFromString:function(r){var n=this,e=r.split(" ");e=_underscore2["default"].map(e,function(r){return r.replace(/[\.\,\(\)]/g,"")});var t=["minutes","minute","seconds"],u=[];return _underscore2["default"].each(e,function(r,n){r.match(/[0-9]+/g)?_underscore2["default"].indexOf(t,e[n+1])>-1?u.push("<"+r+e[n+1].charAt(0)+">"):_underscore2["default"].indexOf(t,e[n+2])>-1?u.push("<"+r+e[n+2].charAt(0)+">"):_underscore2["default"].indexOf(t,e[n+3])>-1&&u.push("<"+r+e[n+3].charAt(0)+">"):"minute"===r&&"a"===e[n-1]&&u.push("<1m>")}),u=_underscore2["default"].map(u,function(r){return n.tagToDuration(r)}),console.log(u),u}};